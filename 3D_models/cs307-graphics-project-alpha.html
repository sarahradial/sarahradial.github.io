<html>
  <head>
    <title>CS307 Graphics Project Alpha</title>
    <style>
      canvas {
        width: 100%;
        height: 70%;
      }
      body {
        margin: 20px;
      }
    </style>
    <script src="../libs/three.min.js"></script>
    <script src="../libs/tw.js"></script>
    <script src="../libs/OrbitControls.js"></script>
    <script src="../libs/dat.gui.min.js"></script>
  </head>
<body>
    <div class="content">
      <div class="main">
        <h1>Graphics Project Alpha by Sarah Yan</h1>
      </div>
      <script src="arch-of-constantine.js"></script>
      <script src="fountain.js"></script>
      <script>
          // creates all of the materials
          function createMaterials(){
            var materials = {
              skyMaterial: new THREE.MeshLambertMaterial({color: new THREE.Color("lightblue"), side: THREE.BackSide}),
              groundMaterial: new THREE.MeshLambertMaterial({color: new THREE.Color("green")}),
              capitalMaterial: new THREE.MeshLambertMaterial({color: new THREE.Color("lightgrey")}),
              shaftMaterial: new THREE.MeshLambertMaterial({color: 0x777777}),
              middleBlockMaterial: new THREE.MeshLambertMaterial({color: 0x888888}),
              stairMaterial: new THREE.MeshLambertMaterial({color: 0x999999}),
              archMaterial: new THREE.MeshLambertMaterial({color: 0x666666, side: THREE.DoubleSide}),
              fountainMiddleMaterial: new THREE.MeshLambertMaterial({color: 0x333333}),
              fountainLightMaterial: new THREE.MeshPhongMaterial({color: 0x63fff9,
                                    specular: new THREE.Color("white"),
                                    shiness: 0.8,
                                    specular: THREE.SmoothShading}),
              fountainSideMaterial: new THREE.MeshLambertMaterial({color: 0xAAAAAA}),
              fountainTopMaterial: new THREE.MeshLambertMaterial({color: 0xDDDDDD})
            };
            return materials;
          }
          var renderer = new THREE.WebGLRenderer();
          var scene = new THREE.Scene();
          TW.mainInit(renderer, scene);

          // add lights
          var ambient = new THREE.AmbientLight(0xDDDDDD, 0.6);
          scene.add(ambient);
          var direct = new THREE.DirectionalLight(0xAAAAAA, 0.8);
          direct.position.set(0, 1, 1);
          scene.add(direct);

          // create parameters
          var columnParams = createColumnParams();
          var sideArchParams = createSideArchParams();
          var middleArchParams = createMiddleArchParams();
          var materialsParams = createMaterials();
          var fountainParams = createFountainParams();

          // create spherical room so that everything is contain in this half sphere
          var sphereGeom = new THREE.SphereGeometry(1000, 60, 60, 0, Math.PI);
          var sphere = new THREE.Mesh(sphereGeom, materialsParams.skyMaterial);
          sphere.rotation.x = -Math.PI/2;
          scene.add(sphere);
          // create the ground of the room
          var groundGeom = new THREE.CircleGeometry(1000, 120);
          var ground = new THREE.Mesh(groundGeom, materialsParams.groundMaterial);
          ground.rotation.x = -Math.PI/2;
          scene.add(ground);

          var archOfConstantine = createArchOfConstantine(columnParams, sideArchParams, middleArchParams, materialsParams);
          archOfConstantine.position.set(0, 0, -500);
          scene.add(archOfConstantine);

          var fountain = createFountain(fountainParams, materialsParams);
          fountain.position.set(0, 0, 700);
          scene.add(fountain);

          var state = TW.cameraSetup(renderer, scene,
                         {minx: -300, maxx: 300,
                          miny: 0, maxy: 300,
                          minz: -1000, maxz: 1000});

          TW.toggleAxes("show");
      </script>
    </div>
    </body>
</html>
